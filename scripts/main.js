function peticionApi(e,a,n,r){var o={type:e,url:a,dataType:"json"};return("undefined"!=typeof n||0!=n)&&(o.data=n),"undefined"!=typeof r&&(console.log("Peticion AJAX: "+e),console.log("Peticion url: "+a),console.log("Peticion parametros: "+n)),$.ajax(o)}function consultaCodeivate(){jsonUsers.forEach(function(e){var a="http://codeivate.com/users/"+e+".json?callback=?";peticionApi("get",a).done(function(a){console.log(a),1==a.programming_now?($("#"+e).find(".status").removeClass("hide"),$("#"+e).find(".progress-level").addClass("active"),$("#"+e).find(".progress-focus").addClass("active"),$("#"+e).find(".thumbnail").addClass("bgactive")):($("#"+e).find(".status").addClass("hide"),$("#"+e).find(".progress-level").removeClass("active"),$("#"+e).find(".progress-focus").removeClass("active"),$("#"+e).find(".thumbnail").removeClass("bgactive")),0==a.current_language?$("#"+e).find(".current").addClass("hide"):($("#"+e).find(".current").removeClass("hide"),$("#"+e).find(".current").html(a.current_language));var n=separaValores(a.level),r=separaValores(a.focus_level);$("#"+e).find(".level span").html(n[0]),$("#"+e).find(".focus span").html(r[0]),asignaBarraEstado(e,".progress-level",n[1]),asignaBarraEstado(e,".progress-focus",r[1]);var o=lenguajesTop(a.languages);if(o.length>0){$("#"+e).find(".langA").removeClass("hide");var s=separaValores(o[0].valor);$("#"+e).find(".langA h5").html(o[0].lenguaje),$("#"+e).find(".langA .lang-level span").html(s[0]),asignaBarraEstado(e,".progress-langA",s[1])}if(o.length>1){$("#"+e).find(".langB").removeClass("hide");var l=separaValores(o[1].valor);$("#"+e).find(".langB h5").html(o[1].lenguaje),$("#"+e).find(".langB .lang-level span").html(l[0]),asignaBarraEstado(e,".progress-langB",l[1])}1==activarPichon&&(a.level<pichonValue&&(pichonValue=a.level,pichon=e),$(".tarjeta").find("#pichon").remove(),$("#"+pichon).find(".thumbnail").append('<div id="pichon"></div>'))})})}function separaValores(e){var a=e.split(".");return a}function asignaBarraEstado(e,a,n){var r=n+"%";$("#"+e).find(a).attr("aria-valuenow",10*n).animate({width:r},50)}function lenguajesTop(e){var a=[];for(var n in e)if(e.hasOwnProperty(n)){var n={lenguaje:n,valor:e[n].level};a.push(n)}var r=ordenamiento(a).reverse();return r}function ordenamiento(e){for(var a=e.length,n=1;a>n;n++)for(var r=0;a-n>r;r++){var o=r+1;e[r].valor>e[o].valor&&intercambioArr(e,r,o)}return e}function intercambioArr(e,a,n){var r=e[a];return e[a]=e[n],e[n]=r,e}var urlJsonUsers="scripts/users.json",jsonUsers=[],template,source,pichon,pichonValue=1e3,activarPichon=!0;$.ajaxSetup({cache:!1}),$(document).ready(function(){source=$("#tarjeta-template").html(),template=Handlebars.compile(source),peticionApi("get",urlJsonUsers,"",!0).done(function(e){console.log(e),e.users.forEach(function(e){console.log(e),jsonUsers.push(e.codeivate);var a=template(e);$("#cont-tarjeta").append(a)}),consultaCodeivate();setInterval(consultaCodeivate,1e4)})});